class PostSlider{constructor(t,e){if(this.container=t,!this.container)throw Error("Container not found.");this.slider=this.container.querySelector(".slider"),this.prevBtn=this.container.querySelector(".handles .prev"),this.nextBtn=this.container.querySelector(".handles .next"),this.sliderWidth=this.slider.clientWidth,this.oneSlideWidth=this.container.querySelector(".slide:nth-child(2)").clientWidth,this.slidesPerPage=Math.trunc(this.sliderWidth/this.oneSlideWidth),this.slideMargin=((this.sliderWidth-this.slidesPerPage*this.oneSlideWidth)/(2*this.slidesPerPage)).toFixed(5),this.changeSlidesMargins(),this.slider.scrollLeft,this.oneSlideWidth,this.slideMargin,this.prevBtn.style.opacity="0",this.createDots(),this.dots=this.container.querySelectorAll(".dots span"),this.bindDotClickHandlers(),this.makeSliderScrollable(),this.prevBtn.addEventListener("click",()=>this.prevSlider()),this.nextBtn.addEventListener("click",()=>this.nextSlider()),this.setActiveDotByScroll(),this.autoplayInterval=null,this.autoplayDelay=1e3*e,this.container.addEventListener("mouseenter",()=>this.pauseAutoplay()),this.container.addEventListener("mouseleave",()=>this.startAutoplay())}changeSlidesMargins(){let t=this.container.querySelectorAll(".slide");2*this.oneSlideWidth>this.sliderWidth?(this.slideMargin=1,this.oneSlideWidth=this.oneSlideWidth+(this.sliderWidth-this.oneSlideWidth-2),t.forEach(t=>{t.style.margin="0 "+this.slideMargin+"px",t.style.minWidth=this.oneSlideWidth+"px"})):t.forEach(t=>{t.style.margin="0 "+this.slideMargin+"px"})}scrollToPosition(t,e=!0){let i=this.slider.scrollLeft;this.slider.scrollTo({top:0,left:i+t,behavior:e?"smooth":"auto"}),setTimeout(()=>{this.snapToNearestSlide()},300)}scrollWithDots(t){this.slider.scrollTo({top:0,left:t,behavior:"smooth"})}handleDotClick(t){let e=t*this.slider.getBoundingClientRect().width;this.scrollWithDots(e)}changeActiveDot(t){this.dots&&0!==this.dots.length&&(this.dots.forEach(t=>t.classList.remove("active")),this.dots[t]&&this.dots[t].classList.add("active"))}bindDotClickHandlers(){this.dots&&0!==this.dots.length&&this.dots.forEach((t,e)=>{t.addEventListener("click",()=>{this.handleDotClick(e)})})}snapToNearestSlide(){let t=this.slider.scrollLeft,e=Math.round(t/(this.oneSlideWidth+2*this.slideMargin))*(this.oneSlideWidth+2*this.slideMargin);this.slider.scrollTo({left:e,behavior:"smooth"})}makeSliderScrollable(){let t=!1,e,i,s=s=>{t=!0,e=s.clientX||s.touches[0].clientX,i=this.slider.scrollLeft,document.addEventListener("mousemove",l),document.addEventListener("touchmove",l),document.addEventListener("mouseup",h),document.addEventListener("touchend",h)},l=s=>{if(t){let l=s.clientX||s.touches[0].clientX,h=l-e;this.slider.scrollLeft=i-h}},h=()=>{t&&(t=!1,this.snapToNearestSlide(),document.removeEventListener("mousemove",l),document.removeEventListener("touchmove",l),document.removeEventListener("mouseup",h),document.removeEventListener("touchend",h))};this.slider.addEventListener("mousedown",s),this.slider.addEventListener("touchstart",s)}setActiveDotByScroll(){this.slider.addEventListener("scroll",()=>{let t=this.slider.scrollLeft,e=Math.trunc((Math.abs(t)+2)/this.slider.clientWidth);this.dots.length,this.changeActiveDot(e),this.prevBtn.style.opacity=t>0?"1":"0",this.nextBtn.style.opacity=t<166?"1":"0",console.log(t)})}nextSlider(){let t=this.slider.scrollWidth,e=this.slider.scrollLeft,i=e+this.oneSlideWidth+2*this.slideMargin;i+this.slider.clientWidth>=t?(this.slider.scrollTo({left:t-this.slider.clientWidth,behavior:"smooth"}),this.nextBtn.style.opacity="0"):this.scrollToPosition(this.oneSlideWidth+2*this.slideMargin)}prevSlider(){let t=this.slider.scrollLeft,e=t-(this.oneSlideWidth+2*this.slideMargin);e<=0?(this.slider.scrollTo({left:0,behavior:"smooth"}),this.prevBtn.style.opacity="0"):this.scrollToPosition(-1*(this.oneSlideWidth+2*this.slideMargin))}createDots(){let t=Math.floor(this.slider.scrollWidth/this.slider.clientWidth),e=this.container.querySelector(".dots");e.innerHTML="";for(let i=0;i<t;i++){let s=document.createElement("span");s.addEventListener("click",()=>{this.handleDotClick(i)}),0===i&&s.classList.add("active"),e.appendChild(s)}}}window.addEventListener("load",function(){let t=document.querySelector(".PostSlide .innerContainer");new PostSlider(t,3)});
